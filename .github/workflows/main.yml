name: CI

on: [push]

jobs:
  build:
    name: Setup Xamarin and Mono versions
    runs-on: macos-latest
    steps:
    - name: setup-xamarin
      uses: maxim-lobanov/setup-xamarin@v1.1
      with:
        xcode-version: 11.x # set the latest available Xcode 11:

  Android:

    runs-on: windows-latest
    
    steps:

    - uses: actions/checkout@v1
    
    - name: Setup NuGet
      uses: NuGet/setup-nuget@v1.0.2
          
    - name: Setup MSBuild.exe
      uses: warrenbuckley/Setup-MSBuild@v1
      
    - name : restore Sample.sln
      run: nuget restore Sample/Direct/Sample.sln
      
    - name: build Sample.Android.csproj
      run: msbuild Sample/Direct/Sample.Android/Sample.Android.csproj /verbosity:normal /t:Rebuild /p:Configuration=Debug

  iOS: 

    runs-on: macos-latest
    
    steps:

    - uses: actions/checkout@v1
    
    - name: Setup NuGet
      uses: NuGet/setup-nuget@v1.0.2
          
    - name : restore Sample.sln
      run: nuget restore Sample/Direct/Sample.sln

    - name: build Sample.iOS.csproj
      run: msbuild Sample/Direct/Sample.iOS/Sample.iOS.csproj /verbosity:normal /t:Rebuild /p:Platform=iPhoneSimulator /p:Configuration=Debug
 
